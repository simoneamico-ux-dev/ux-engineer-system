<!DOCTYPE html>
<!-- ğŸ¯ DICHIARAZIONE HTML5: "Benvenuti nella fabbrica di promemoria digitali!" -->
<!-- Ãˆ come aprire un'agenda che non dimentica mai nulla! ğŸ“‹ -->

<html lang="en">
<!-- ğŸŒ CONTENITORE PRINCIPALE: La nostra app per organizzare la vita -->
<!-- lang="en" = inglese, la lingua della produttivitÃ ! âœ… -->

<head>
  <!-- ğŸ§  IL CENTRO DI CONTROLLO: Dove impostiamo tutto per la nostra Todo App -->
  
  <meta charset="UTF-8" />
  <!-- ğŸ“ CARATTERI UNIVERSALI: UTF-8 per emoji e simboli! âœ“âœ—ğŸ“… -->
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- ğŸŒ COMPATIBILITÃ€ IE: "Anche Internet Explorer puÃ² usare la nostra app!" -->
  <!-- edge = usa l'ultima versione del motore di rendering -->
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- ğŸ“± DESIGN RESPONSIVE: "L'agenda si adatta a ogni schermo!" -->
  
  <title>Learn localStorage by Building a Todo App</title>
  <!-- ğŸ“‘ TITOLO: Impariamo localStorage costruendo qualcosa di utile! -->
  
  <style>
    /* ğŸ¨ ===== SISTEMA DI DESIGN: I Colori della ProduttivitÃ  ===== */
    
    :root {
      --white: #fff;
      /* âšª BIANCO PURO: Per sfondi puliti */
      
      --light-grey: #f5f6f7;
      /* ğŸ”˜ GRIGIO CHIARO: Testo su sfondo scuro */
      
      --dark-grey: #0a0a23;
      /* âš« GRIGIO SCURO: Lo sfondo principale */
      
      --yellow: #f1be32;
      /* ğŸŸ¡ GIALLO: Il bordo della nostra app */
      
      --golden-yellow: #feac32;
      /* ğŸŒŸ GIALLO DORATO: Per i bottoni call-to-action */
    }

    /* ğŸ”„ ===== RESET UNIVERSALE ===== */
    
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      /* ğŸ“¦ RESET TOTALE: Tabula rasa per controllo completo */
      /* Include anche pseudo-elementi! */
    }

    body {
      background-color: var(--dark-grey);
      /* ğŸŒ‘ SFONDO SCURO: Per far risaltare l'app */
    }

    /* ğŸ“ ===== LAYOUT PRINCIPALE ===== */
    
    main {
      display: flex;
      flex-direction: column;
      /* ğŸ¯ FLEX VERTICALE: Elementi uno sotto l'altro */
      
      justify-content: center;
      align-items: center;
      /* âš–ï¸ CENTRATURA PERFETTA: Tutto al centro dello schermo */
    }

    h1 {
      color: var(--light-grey);
      /* ğŸ”¤ TITOLO CHIARO: Contrasto su sfondo scuro */
      
      margin: 20px 0 40px 0;
      /* ğŸ“ MARGINI: 20px sopra, 40px sotto per respiro */
    }

    /* ğŸ“‹ ===== L'APP TODO ===== */
    
    .todo-app {
      background-color: var(--white);
      /* âšª SFONDO BIANCO: La nostra "carta" digitale */
      
      width: 300px;
      height: 350px;
      /* ğŸ“ DIMENSIONI: Compatta ma funzionale */
      
      border: 5px solid var(--yellow);
      /* ğŸŸ¡ BORDO GIALLO: 5px spessi per risaltare */
      
      border-radius: 8px;
      /* ğŸ”„ ANGOLI MORBIDI: Moderni e accoglienti */
      
      padding: 15px;
      /* ğŸ  PADDING: Spazio interno per respirare */
      
      position: relative;
      /* ğŸ“ POSIZIONE RELATIVA: Per il form popup */
      
      display: flex;
      flex-direction: column;
      gap: 10px;
      /* ğŸ¯ FLEX COLUMN: Elementi verticali con gap di 10px */
    }

    /* ğŸ”˜ ===== STILI DEI BOTTONI ===== */
    
    .btn {
      cursor: pointer;
      /* ğŸ‘† MANINA: "Cliccami!" */
      
      width: 100px;
      margin: 10px;
      /* ğŸ“ DIMENSIONI: Bottoni standard */
      
      color: var(--dark-grey);
      /* ğŸ”¤ TESTO SCURO: Su sfondo chiaro */
      
      background-color: var(--golden-yellow);
      /* ğŸŒŸ SFONDO DORATO: Attira l'attenzione */
      
      background-image: linear-gradient(#fecc4c, #ffac33);
      /* ğŸŒ… GRADIENTE: Dal giallo chiaro al dorato */
      /* Crea profonditÃ  e modernitÃ  */
      
      border-color: var(--golden-yellow);
      border-width: 3px;
      /* ğŸ–¼ï¸ BORDO: 3px dello stesso colore */
    }

    .btn:hover {
      background-image: linear-gradient(#ffcc4c, #f89808);
      /* ğŸ”¥ HOVER: Gradiente piÃ¹ caldo/scuro */
      /* Dal giallo all'arancione per feedback visivo */
    }

    .large-btn {
      width: 80%;
      /* ğŸ“ BOTTONE LARGO: 80% del contenitore */
      
      font-size: 1.2rem;
      /* ğŸ”¤ TESTO PIÃ™ GRANDE: 1.2rem per importanza */
      
      align-self: center;
      justify-self: center;
      /* âš–ï¸ AUTO-CENTRATURA: In flex container */
    }

    /* âŒ ===== BOTTONE CHIUDI ===== */
    
    .close-task-form-btn {
      background: none;
      border: none;
      /* ğŸš« NIENTE STILI: Solo l'icona SVG */
      
      cursor: pointer;
      /* ğŸ‘† MANINA: Ancora cliccabile */
    }

    .close-icon {
      width: 20px;
      height: 20px;
      /* ğŸ“ ICONA PICCOLA: 20x20 pixel */
    }

    /* ğŸ“ ===== FORM DEI TASK ===== */
    
    .task-form {
      display: flex;
      /* ğŸ¯ FLEX CONTAINER: Per layout interno */
      
      position: absolute;
      /* ğŸ“ POSIZIONE ASSOLUTA: Per sovrapporsi */
      
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      /* ğŸ¯ CENTRATURA PERFETTA: Il trucco del -50%! */
      /* top/left 50% = angolo al centro */
      /* translate -50% = sposta indietro di metÃ  dimensione */
      /* Risultato = centro perfetto! */
      
      background-color: var(--white);
      /* âšª SFONDO BIANCO: Come l'app principale */
      
      border-radius: 5px;
      /* ğŸ”„ ANGOLI: Leggermente arrotondati */
      
      padding: 15px;
      /* ğŸ  PADDING: Spazio interno */
      
      width: 300px;
      height: 350px;
      /* ğŸ“ STESSE DIMENSIONI: Dell'app principale */
      
      flex-direction: column;
      /* ğŸ“¦ FLEX VERTICALE: Elementi in colonna */
      
      justify-content: space-between;
      /* âš–ï¸ SPAZIO TRA: Header, body e footer separati */
      
      overflow: auto;
      /* ğŸ“œ SCROLL: Se il contenuto Ã¨ troppo */
    }

    /* ğŸ“° ===== PARTI DEL FORM ===== */
    
    .task-form-header {
      display: flex;
      justify-content: flex-end;
      /* â¡ï¸ ALLINEA A DESTRA: Per il bottone X */
    }

    .task-form-body {
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      /* ğŸ“¦ FLEX COLUMN: Campi uno sotto l'altro */
      /* space-around = spazio uniforme tra elementi */
    }

    .task-form-footer {
      display: flex;
      justify-content: center;
      /* âš–ï¸ CENTRA: Il bottone submit */
    }

    /* ğŸ“‹ ===== CAMPI DEL FORM ===== */
    
    .task-form-label,
    #title-input,
    #date-input,
    #description-input {
      display: block;
      /* ğŸ“¦ DISPLAY BLOCK: Uno per riga */
    }

    .task-form-label {
      margin-bottom: 5px;
      /* â¬‡ï¸ SPAZIO: Tra label e input */
      
      font-size: 1.3rem;
      font-weight: bold;
      /* ğŸ”¤ LABEL EVIDENTI: Grandi e in grassetto */
    }

    #title-input,
    #date-input,
    #description-input {
      width: 100%;
      /* ğŸ“ LARGHEZZA PIENA: Occupano tutto */
      
      margin-bottom: 10px;
      /* â¬‡ï¸ SPAZIO TRA CAMPI: 10px */
      
      padding: 2px;
      /* ğŸ  PICCOLO PADDING: Per il testo */
    }

    /* ğŸ’¬ ===== DIALOG DI CONFERMA ===== */
    
    #confirm-close-dialog {
      padding: 10px;
      margin: 10px auto;
      /* ğŸ  SPAZI: Padding interno, margin auto per centrare */
      
      border-radius: 15px;
      /* ğŸ”„ MOLTO ARROTONDATO: 15px per morbidezza */
    }

    .confirm-close-dialog-btn-container {
      display: flex;
      justify-content: center;
      /* ğŸ¯ FLEX CENTER: Bottoni affiancati al centro */
      
      margin-top: 10px;
      /* â¬†ï¸ SPAZIO: Sopra i bottoni */
    }

    .discard-message-text {
      font-weight: bold;
      font-size: 1.5rem;
      /* ğŸ”¤ MESSAGGIO IMPORTANTE: Grande e grassetto */
    }

    /* ğŸ“¦ ===== CONTAINER DEI TASK ===== */
    
    #tasks-container {
      height: 100%;
      /* ğŸ“ ALTEZZA PIENA: Occupa tutto lo spazio disponibile */
      
      overflow-y: auto;
      /* ğŸ“œ SCROLL VERTICALE: Se ci sono troppi task */
    }

    .task {
      margin: 5px 0;
      /* ğŸ“ MARGINI: 5px sopra e sotto ogni task */
    }

    /* ğŸ‘» ===== CLASSE UTILITY ===== */
    
    .hidden {
      display: none;
      /* ğŸš« NASCOSTO: Per mostrare/nascondere elementi */
    }

    /* ğŸ“± ===== RESPONSIVE DESIGN ===== */
    
    @media (min-width: 576px) {
      /* ğŸ’» SCHERMI MEDI: Sopra i 576px */
      
      .todo-app,
      .task-form {
        width: 400px;
        height: 450px;
        /* ğŸ“ PIÃ™ GRANDI: Da 300x350 a 400x450 */
      }

      .task-form-label {
        font-size: 1.5rem;
        /* ğŸ”¤ LABEL PIÃ™ GRANDI: Da 1.3 a 1.5rem */
      }

      #title-input,
      #date-input {
        height: 2rem;
        /* ğŸ“ INPUT PIÃ™ ALTI: 2rem per migliore usabilitÃ  */
      }

      #title-input,
      #date-input,
      #description-input {
        padding: 5px;
        margin-bottom: 20px;
        /* ğŸ  PIÃ™ SPAZIO: Padding e margin maggiori */
      }
    }
  </style>
</head>

<body>
  <!-- ğŸ—ï¸ ===== LA STRUTTURA HTML ===== -->
  
  <main>
    <!-- ğŸ“„ CONTENITORE PRINCIPALE: Il palcoscenico della nostra app -->
    
    <h1>Todo App</h1>
    <!-- ğŸ“ TITOLO: Semplice e diretto -->
    
    <div class="todo-app">
      <!-- ğŸ“‹ APP CONTAINER: La scatola magica dei task -->
      
      <button id="open-task-form-btn" class="btn large-btn">
        Add New Task
      </button>
      <!-- â• BOTTONE AGGIUNGI: Il punto di partenza per nuovi task -->
      
      <form class="task-form hidden" id="task-form">
        <!-- ğŸ“ FORM NASCOSTO: Appare solo quando serve -->
        <!-- hidden = classe che lo nasconde inizialmente -->
        
        <div class="task-form-header">
          <!-- ğŸ“° HEADER FORM: Contiene il bottone chiudi -->
          
          <button id="close-task-form-btn" class="close-task-form-btn" type="button" aria-label="close">
            <!-- âŒ BOTTONE CHIUDI: type="button" per non submit del form -->
            <!-- aria-label="close" = accessibilitÃ  per screen reader -->
            
            <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
              <!-- ğŸ¨ ICONA SVG: Una X rossa -->
              <path fill="#F44336" d="M21.5 4.5H26.501V43.5H21.5z" transform="rotate(45.001 24 24)" />
              <!-- ğŸ“ PRIMA LINEA: Ruotata di 45Â° -->
              <path fill="#F44336" d="M21.5 4.5H26.5V43.501H21.5z" transform="rotate(135.008 24 24)" />
              <!-- ğŸ“ SECONDA LINEA: Ruotata di 135Â° per formare la X -->
            </svg>
          </button>
        </div>
        
        <div class="task-form-body">
          <!-- ğŸ“‹ CORPO FORM: I campi di input -->
          
          <label class="task-form-label" for="title-input">Title</label>
          <input required type="text" class="form-control" id="title-input" value="" />
          <!-- ğŸ“ TITOLO: Campo obbligatorio (required) -->
          
          <label class="task-form-label" for="date-input">Date</label>
          <input type="date" class="form-control" id="date-input" value="" />
          <!-- ğŸ“… DATA: Input type="date" per calendario -->
          
          <label class="task-form-label" for="description-input">Description</label>
          <textarea class="form-control" id="description-input" cols="30" rows="5"></textarea>
          <!-- ğŸ“„ DESCRIZIONE: Textarea per testo lungo -->
          <!-- cols="30" rows="5" = dimensioni iniziali -->
        </div>
        
        <div class="task-form-footer">
          <!-- ğŸ¦¶ FOOTER FORM: Il bottone di azione -->
          
          <button id="add-or-update-task-btn" class="btn large-btn" type="submit">
            Add Task
          </button>
          <!-- âœ… BOTTONE SUBMIT: Diventa "Update Task" in modalitÃ  edit -->
        </div>
      </form>
      
      <dialog id="confirm-close-dialog">
        <!-- ğŸ’¬ DIALOG NATIVO: HTML5 dialog element! -->
        <!-- Ãˆ come un alert() ma piÃ¹ elegante -->
        
        <form method="dialog">
          <!-- ğŸ“ FORM DIALOG: method="dialog" chiude automaticamente il dialog -->
          
          <p class="discard-message-text">Discard unsaved changes?</p>
          <!-- âš ï¸ MESSAGGIO: Avviso di modifiche non salvate -->
          
          <div class="confirm-close-dialog-btn-container">
            <button id="cancel-btn" class="btn">
              Cancel
            </button>
            <!-- âŒ ANNULLA: Torna al form -->
            
            <button id="discard-btn" class="btn">
              Discard
            </button>
            <!-- ğŸ—‘ï¸ SCARTA: Chiude senza salvare -->
          </div>
        </form>
      </dialog>
      
      <div id="tasks-container"></div>
      <!-- ğŸ“¦ CONTAINER TASK: Qui appariranno tutti i task -->
      <!-- Inizialmente vuoto, popolato via JavaScript -->
    </div>
  </main>
  
  <script>
    /* ğŸ® ===== JAVASCRIPT: Il Cervello della Todo App! ===== */
    
    /* ğŸ” ===== SELEZIONE ELEMENTI DOM ===== */
    
    const taskForm = document.getElementById("task-form");
    // ğŸ“ FORM: Il modulo per creare/modificare task
    
    const confirmCloseDialog = document.getElementById("confirm-close-dialog");
    // ğŸ’¬ DIALOG: Il popup di conferma chiusura
    
    const openTaskFormBtn = document.getElementById("open-task-form-btn");
    // â• BOTTONE APRI: Per mostrare il form
    
    const closeTaskFormBtn = document.getElementById("close-task-form-btn");
    // âŒ BOTTONE CHIUDI: La X per chiudere il form
    
    const addOrUpdateTaskBtn = document.getElementById("add-or-update-task-btn");
    // âœ… BOTTONE SUBMIT: Add o Update a seconda del contesto
    
    const cancelBtn = document.getElementById("cancel-btn");
    // âŒ BOTTONE CANCEL: Nel dialog di conferma
    
    const discardBtn = document.getElementById("discard-btn");
    // ğŸ—‘ï¸ BOTTONE DISCARD: Per scartare le modifiche
    
    const tasksContainer = document.getElementById("tasks-container");
    // ğŸ“¦ CONTAINER: Dove mostreremo i task
    
    const titleInput = document.getElementById("title-input");
    // ğŸ“ INPUT TITOLO: Campo del titolo
    
    const dateInput = document.getElementById("date-input");
    // ğŸ“… INPUT DATA: Campo della data
    
    const descriptionInput = document.getElementById("description-input");
    // ğŸ“„ TEXTAREA: Campo descrizione

    /* ğŸ“Š ===== GESTIONE DATI ===== */
    
    const taskData = JSON.parse(localStorage.getItem("data")) || [];
    // ğŸ’¾ DATI SALVATI: Recupera da localStorage o array vuoto
    // localStorage.getItem("data") = recupera la stringa salvata
    // JSON.parse() = converte la stringa in array di oggetti
    // || [] = se non c'Ã¨ nulla, usa array vuoto
    // Ãˆ come aprire un cassetto e vedere cosa c'Ã¨ dentro!
    
    let currentTask = {};
    // ğŸ“ TASK CORRENTE: Oggetto vuoto per tracciare modifiche
    // Quando editiamo, qui salviamo il task originale

    /* ğŸ§¹ ===== FUNZIONE PULIZIA CARATTERI ===== */
    
    const removeSpecialChars = (val) => {
      return val.trim().replace(/[^A-Za-z0-9\-\s]/g, '')
      // ğŸ§¹ PULIZIA INPUT: Rimuove caratteri speciali
      // trim() = toglie spazi all'inizio e fine
      // replace() con regex = sostituisce caratteri non voluti
      // [^A-Za-z0-9\-\s] = tutto tranne lettere, numeri, trattini e spazi
      // g = global, su tutta la stringa
      // Ãˆ come un filtro che fa passare solo caratteri "sicuri"
    }

    /* â• ===== FUNZIONE AGGIUNGI/AGGIORNA TASK ===== */
    
    const addOrUpdateTask = () => {
      // ğŸ” VALIDAZIONE: Controlla che ci sia un titolo
      if(!titleInput.value.trim()){
        alert("Please provide a title");
        return;
        // ğŸš« STOP: Se non c'Ã¨ titolo, esci dalla funzione
      }
      
      // ğŸ” CERCA INDICE: Vedi se stiamo modificando un task esistente
      const dataArrIndex = taskData.findIndex((item) => item.id === currentTask.id);
      // findIndex() = trova la posizione nell'array
      // -1 = non trovato (task nuovo)
      // >= 0 = trovato (task esistente)
      
      // ğŸ“¦ CREA OGGETTO TASK: Con tutti i dati puliti
      const taskObj = {
        id: `${removeSpecialChars(titleInput.value).toLowerCase().split(" ").join("-")}-${Date.now()}`,
        // ğŸ†” ID UNICO: Titolo-pulito-in-kebab-case-timestamp
        // toLowerCase() = tutto minuscolo
        // split(" ") = dividi per spazi
        // join("-") = unisci con trattini
        // Date.now() = timestamp per unicitÃ 
        // Esempio: "Buy Milk!" diventa "buy-milk-1634567890123"
        
        title: removeSpecialChars(titleInput.value),
        // ğŸ“ TITOLO: Pulito da caratteri speciali
        
        date: dateInput.value,
        // ğŸ“… DATA: CosÃ¬ com'Ã¨ dal campo date
        
        description: removeSpecialChars(descriptionInput.value),
        // ğŸ“„ DESCRIZIONE: Anche questa pulita
      };

      // ğŸ”€ AGGIUNGI O AGGIORNA: A seconda se esiste giÃ 
      if (dataArrIndex === -1) {
        taskData.unshift(taskObj);
        // â• NUOVO TASK: unshift() aggiunge all'INIZIO dell'array
        // I task nuovi appaiono in cima!
      } else {
        taskData[dataArrIndex] = taskObj;
        // ğŸ“ AGGIORNA: Sostituisci il task alla posizione trovata
      }

      // ğŸ’¾ SALVA IN LOCALSTORAGE: Persisti i dati
      localStorage.setItem("data", JSON.stringify(taskData));
      // JSON.stringify() = converte array in stringa
      // localStorage puÃ² salvare solo stringhe!
      // Ãˆ come scrivere la lista su un foglio e metterla nel cassetto
      
      updateTaskContainer()
      // ğŸ”„ AGGIORNA UI: Ridisegna la lista dei task
      
      reset()
      // ğŸ§¹ PULISCI: Resetta il form
    };

    /* ğŸ”„ ===== FUNZIONE AGGIORNA CONTAINER ===== */
    
    const updateTaskContainer = () => {
      tasksContainer.innerHTML = "";
      // ğŸ§¹ PULISCI: Svuota il container
      // innerHTML = "" Ã¨ come cancellare la lavagna

      // ğŸ“‹ RICOSTRUISCI: Per ogni task nell'array...
      taskData.forEach(
        ({ id, title, date, description }) => {
          // ğŸ“¦ DESTRUTTURAZIONE: Estrai le proprietÃ  dall'oggetto
          // Ãˆ come aprire una scatola e tirare fuori tutto
          
          tasksContainer.innerHTML += `
            <div class="task" id="${id}">
              <p><strong>Title:</strong> ${title}</p>
              <p><strong>Date:</strong> ${date}</p>
              <p><strong>Description:</strong> ${description}</p>
              <button onclick="editTask(this)" type="button" class="btn">Edit</button>
              <button onclick="deleteTask(this)" type="button" class="btn">Delete</button> 
            </div>
          `
          // ğŸ“ TEMPLATE LITERAL: Crea HTML per ogni task
          // ${} = inserisci variabili nel template
          // onclick="editTask(this)" = quando clicchi, chiama editTask
          // this = passa il bottone stesso come parametro
          // Ãˆ come stampare una scheda per ogni task
        }
      );
    };

    /* ğŸ—‘ï¸ ===== FUNZIONE ELIMINA TASK ===== */
    
    const deleteTask = (buttonEl) => {
      // ğŸ” TROVA INDICE: Dal bottone risali al task
      const dataArrIndex = taskData.findIndex(
        (item) => item.id === buttonEl.parentElement.id
      );
      // buttonEl = il bottone cliccato
      // parentElement = il div.task che contiene il bottone
      // .id = l'ID univoco del task
      // Ãˆ come trovare il numero di una scheda dal suo contenitore

      buttonEl.parentElement.remove();
      // ğŸ—‘ï¸ RIMUOVI DA DOM: Elimina visivamente il task
      // remove() = rimuove l'elemento dalla pagina

      taskData.splice(dataArrIndex, 1);
      // âœ‚ï¸ RIMUOVI DA ARRAY: Taglia via dall'array
      // splice(indice, quantitÃ ) = rimuovi 1 elemento a quell'indice
      // Ãˆ come strappare una pagina dal quaderno

      localStorage.setItem("data", JSON.stringify(taskData));
      // ğŸ’¾ SALVA: Aggiorna localStorage senza il task eliminato
    }

    /* âœï¸ ===== FUNZIONE MODIFICA TASK ===== */
    
    const editTask = (buttonEl) => {
      // ğŸ” TROVA TASK: Stesso metodo di delete
      const dataArrIndex = taskData.findIndex(
        (item) => item.id === buttonEl.parentElement.id
      );

      currentTask = taskData[dataArrIndex];
      // ğŸ“‹ SALVA ORIGINALE: Per confronti futuri
      // currentTask ora contiene il task che stiamo modificando

      // ğŸ“ RIEMPI FORM: Con i dati attuali
      titleInput.value = currentTask.title;
      dateInput.value = currentTask.date;
      descriptionInput.value = currentTask.description;
      // Ãˆ come copiare i dati dalla scheda al modulo

      addOrUpdateTaskBtn.innerText = "Update Task";
      // ğŸ”„ CAMBIA TESTO: Da "Add" a "Update"
      // innerText = il testo visibile del bottone

      taskForm.classList.toggle("hidden");
      // ğŸ‘ï¸ MOSTRA FORM: toggle rimuove la classe hidden
      // Il form appare con i dati precompilati!
    }

    /* ğŸ§¹ ===== FUNZIONE RESET ===== */
    
    const reset = () => {
      addOrUpdateTaskBtn.innerText = "Add Task";
      // ğŸ”„ RIPRISTINA TESTO: Torna a "Add Task"
      
      titleInput.value = "";
      dateInput.value = "";
      descriptionInput.value = "";
      // ğŸ§¹ PULISCI CAMPI: Tutti vuoti
      // Ãˆ come cancellare il modulo
      
      taskForm.classList.toggle("hidden");
      // ğŸ‘» NASCONDI FORM: Riaggiunge la classe hidden
      
      currentTask = {};
      // ğŸ—‘ï¸ SVUOTA CURRENT: Nessun task in modifica
    }

    /* ğŸš€ ===== INIZIALIZZAZIONE ===== */
    
    if (taskData.length) {
      updateTaskContainer();
      // ğŸ“‹ CARICA TASK: Se ci sono task salvati, mostrali
      // Solo se l'array non Ã¨ vuoto
      // Ãˆ come aprire l'agenda e vedere cosa c'era scritto
    }

    /* ğŸ® ===== EVENT LISTENERS ===== */
    
    // â• APRI FORM: Click su "Add New Task"
    openTaskFormBtn.addEventListener("click", () =>
      taskForm.classList.toggle("hidden")
      // ğŸ‘ï¸ TOGGLE: Mostra/nascondi il form
      // Arrow function inline per semplicitÃ 
    );

    // âŒ CHIUDI FORM: Click sulla X
    closeTaskFormBtn.addEventListener("click", () => {
      // ğŸ” CONTROLLA CAMBIAMENTI: Ci sono dati non salvati?
      const formInputsContainValues = titleInput.value || dateInput.value || descriptionInput.value;
      // || = OR logico, basta che uno sia vero
      // true se almeno un campo ha valore
      
      // ğŸ” CONTROLLA MODIFICHE: I valori sono diversi dall'originale?
      const formInputValuesUpdated = titleInput.value !== currentTask.title || 
                                    dateInput.value !== currentTask.date || 
                                    descriptionInput.value !== currentTask.description;
      // !== = diverso da
      // true se almeno un valore Ã¨ cambiato

      if (formInputsContainValues && formInputValuesUpdated) {
        confirmCloseDialog.showModal();
        // ğŸ’¬ MOSTRA DIALOG: Se ci sono modifiche non salvate
        // showModal() = metodo nativo dei dialog HTML5
        // Ãˆ come chiedere "Sei sicuro di voler uscire?"
      } else {
        reset();
        // ğŸ§¹ CHIUDI DIRETTO: Se non ci sono modifiche
      }
    });

    // âŒ ANNULLA DIALOG: Click su "Cancel"
    cancelBtn.addEventListener("click", () => confirmCloseDialog.close());
    // ğŸšª CHIUDI DIALOG: close() Ã¨ il metodo nativo
    // Torna al form senza perdere i dati

    // ğŸ—‘ï¸ SCARTA MODIFICHE: Click su "Discard"
    discardBtn.addEventListener("click", () => {
      confirmCloseDialog.close();
      // ğŸšª CHIUDI DIALOG: Prima chiudi il popup
      
      reset()
      // ğŸ§¹ POI RESETTA: Pulisci tutto
      // L'ordine Ã¨ importante!
    });

    // ğŸ“ SUBMIT FORM: Quando invii il form
    taskForm.addEventListener("submit", (e) => {
      e.preventDefault();
      // ğŸš« BLOCCA DEFAULT: Non ricaricare la pagina!
      // preventDefault() = impedisce il comportamento standard del form
      // Altrimenti la pagina si ricaricherebbe

      addOrUpdateTask();
      // â• AGGIUNGI/AGGIORNA: Chiama la funzione principale
      // Che gestirÃ  tutto: validazione, salvataggio, aggiornamento UI
    });
  </script>
</body>

</html>
