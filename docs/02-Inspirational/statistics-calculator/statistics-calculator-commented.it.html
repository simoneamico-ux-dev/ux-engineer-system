<!DOCTYPE html>
<!-- üéØ DICHIARAZIONE HTML5: "Benvenuti nel laboratorio di statistica!" -->
<!-- √à come aprire le porte di un centro di calcolo matematico! üìä -->

<html lang="en">
<!-- üåç CONTENITORE PRINCIPALE: Il nostro calcolatore statistico -->
<!-- lang="en" = inglese, la lingua della matematica universale! üî¢ -->

  <head>
    <!-- üß† IL CERVELLO MATEMATICO: Dove prepariamo formule e stili -->
    <!-- √à come la lavagna dove scriviamo le istruzioni prima di calcolare -->
    
    <meta charset="UTF-8" />
    <!-- üìù CARATTERI UNIVERSALI: UTF-8 per tutti i simboli numerici! üî¢ -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- üì± DESIGN RESPONSIVE: "Calcola su ogni dispositivo!" -->
    <!-- width=device-width = larghezza del dispositivo -->
    <!-- initial-scale=1 = zoom iniziale al 100% -->
    
    <title>Statistics Calculator</title>
    <!-- üìë TITOLO DELLA TAB: Semplice e descrittivo -->
    
    <style>
      /* üé® ===== STILI CSS: L'Aspetto del Calcolatore ===== */
      
      body {
        margin: 0;
        /* üö´ NIENTE MARGINI: Partiamo dai bordi */
        
        background-color: rgb(27, 27, 50);
        /* üåÉ BLU NOTTE PROFONDO: rgb(27, 27, 50)
        Un blu scuro elegante per ridurre l'affaticamento visivo */
        
        text-align: center;
        /* ‚öñÔ∏è TUTTO CENTRATO: Il calcolatore sta al centro -->
        
        color: #fff;
        /* ‚ö™ TESTO BIANCO: Contrasto perfetto sul blu scuro */
      }
      
      button {
        cursor: pointer;
        /* üëÜ MANINA: Indica che il bottone √® cliccabile */
        
        background-color: rgb(59, 59, 79);
        /* üîµ BLU GRIGIO: Pi√π chiaro del body per distinzione */
        
        border: 3px solid white;
        /* üî≤ BORDO BIANCO SPESSO: 3px per visibilit√† */
        
        color: white;
        /* ‚ö™ TESTO BIANCO: Leggibile sul bottone scuro */
      }
      
      input {
        background-color: rgb(10, 10, 35);
        /* üåë BLU QUASI NERO: Pi√π scuro del body per profondit√† */
        
        color: white;
        /* ‚ö™ TESTO BIANCO: Per input leggibile */
        
        border: 1px solid rgb(59, 59, 79);
        /* üî≤ BORDO SOTTILE: Stesso colore del bottone per coerenza */
      }
      
      .bold {
        font-weight: bold;
        /* üí™ GRASSETTO: Per evidenziare i risultati */
      }
    </style>
  </head>
  
  <body>
    <!-- üìä ===== IL CALCOLATORE PRENDE VITA ===== -->
    
    <h1>Statistics Calculator</h1>
    <!-- üìä TITOLO PRINCIPALE: Grande e centrale -->
    
    <p>Enter a list of comma-separated numbers.</p>
    <!-- üìù ISTRUZIONI: Chiare e semplici per l'utente -->
    
    <form onsubmit="calculate(); return false;">
      <!-- üìã FORM INTERATTIVO: Il cuore dell'interfaccia -->
      <!-- onsubmit="calculate(); return false;" -->
      <!-- Quando invii il form: -->
      <!-- 1. Chiama la funzione calculate() -->
      <!-- 2. return false previene il refresh della pagina! -->
      <!-- √à come dire "fai i calcoli ma resta qui!" -->
      
      <label for="numbers">Numbers:</label>
      <!-- üè∑Ô∏è ETICHETTA: Associata all'input tramite "for" -->
      <!-- Migliora l'accessibilit√† e l'usabilit√† -->
      
      <input type="text" name="numbers" id="numbers" />
      <!-- üìù CAMPO INPUT: Dove l'utente inserisce i numeri -->
      <!-- type="text" = accetta qualsiasi testo -->
      <!-- id="numbers" = identificatore univoco per JavaScript -->
      
      <button type="submit">Calculate</button>
      <!-- üîò BOTTONE SUBMIT: Avvia i calcoli -->
      <!-- type="submit" = invia il form quando cliccato -->
    </form>
    
    <div class="results">
      <!-- üìä SEZIONE RISULTATI: Dove mostriamo i calcoli -->
      
      <p>
        The <dfn>mean</dfn> of a list of numbers is the average, calculated by
        taking the sum of all numbers and dividing that by the count of numbers.
        <!-- üìö DEFINIZIONE MEAN: Il tag <dfn> indica una definizione -->
        <!-- √à semanticamente corretto per termini tecnici! -->
      </p>
      <p class="bold">Mean: <span id="mean"></span></p>
      <!-- üìä RISULTATO MEAN: Lo span sar√† riempito da JavaScript -->
      <!-- class="bold" = in grassetto per visibilit√† -->
      
      <p>
        The <dfn>median</dfn> of a list of numbers is the number that appears in
        the middle of the list, when sorted from least to greatest.
        <!-- üìö DEFINIZIONE MEDIAN: Il valore centrale -->
      </p>
      <p class="bold">Median: <span id="median"></span></p>
      <!-- üìä RISULTATO MEDIAN: Placeholder per il valore -->
      
      <p>
        The <dfn>mode</dfn> of a list of numbers is the number that appears most
        often in the list.
        <!-- üìö DEFINIZIONE MODE: Il pi√π frequente -->
      </p>
      <p class="bold">Mode: <span id="mode"></span></p>
      <!-- üìä RISULTATO MODE: Pu√≤ essere multiplo! -->
      
      <p>
        The <dfn>range</dfn> of a list of numbers is the difference between the
        largest and smallest numbers in the list.
        <!-- üìö DEFINIZIONE RANGE: Max - Min -->
      </p>
      <p class="bold">Range: <span id="range"></span></p>
      <!-- üìä RISULTATO RANGE: L'intervallo dei valori -->
      
      <p>
        The <dfn>variance</dfn> of a list of numbers measures how far the values
        are from the mean, on average.
        <!-- üìö DEFINIZIONE VARIANCE: Dispersione quadratica -->
      </p>
      <p class="bold">Variance: <span id="variance"></span></p>
      <!-- üìä RISULTATO VARIANCE: Misura di dispersione -->
      
      <p>
        The <dfn>standard deviation</dfn> of a list of numbers is the square
        root of the variance.
        <!-- üìö DEFINIZIONE STANDARD DEVIATION: Radice della varianza -->
      </p>
      <p class="bold">
        Standard Deviation: <span id="standardDeviation"></span>
        <!-- üìä RISULTATO STANDARD DEVIATION: Dispersione normalizzata -->
      </p>
    </div>
    
    <script>
      /* üßÆ ===== IL MOTORE MATEMATICO: JavaScript in Azione! ===== */
      
      /* üìä ===== FUNZIONE MEAN (MEDIA) ===== */
      const getMean = (array) => array.reduce((acc, el) => acc + el, 0) / array.length;
      /* üéØ ARROW FUNCTION COMPATTA: Una riga di pura potenza!
         
         SCOMPOSIZIONE:
         1. (array) => : Prende un array come parametro
         2. array.reduce() : Metodo che "riduce" l'array a un singolo valore
         3. (acc, el) => acc + el : Per ogni elemento, sommalo all'accumulatore
         4. , 0 : L'accumulatore parte da 0
         5. / array.length : Dividi la somma per il numero di elementi
         
         ESEMPIO: [2, 4, 6]
         - Somma: 2 + 4 + 6 = 12
         - Conteggio: 3 elementi
         - Media: 12 / 3 = 4
      */

      /* üìä ===== FUNZIONE MEDIAN (MEDIANA) ===== */
      const getMedian = (array) => {
        const sorted = array.toSorted((a, b) => a - b);
        /* üîÑ ORDINAMENTO: toSorted() crea una copia ordinata!
           (a, b) => a - b : Ordina in modo crescente
           - Se a - b < 0, a viene prima di b
           - Se a - b > 0, b viene prima di a
           - Se a - b = 0, sono uguali
           
           NOTA: toSorted() √® nuovo! Non modifica l'array originale
        */
        
        const median =
          sorted.length % 2 === 0
            ? getMean([sorted[sorted.length / 2], sorted[sorted.length / 2 - 1]])
            : sorted[Math.floor(sorted.length / 2)];
        /* üéØ OPERATORE TERNARIO: Come un if/else compatto!
           
           condizione ? seVero : seFalso
           
           CASO PARI (es: [1,2,3,4]):
           - sorted.length % 2 === 0 : true (4 √® pari)
           - Prende i due elementi centrali: indice 2 e 1 (valori 3 e 2)
           - Calcola la media: getMean([3, 2]) = 2.5
           
           CASO DISPARI (es: [1,2,3,4,5]):
           - sorted.length % 2 === 0 : false (5 √® dispari)
           - Math.floor(5 / 2) = 2 (arrotonda per difetto)
           - Prende l'elemento all'indice 2: valore 3
        */
        
        return median;
        /* üì§ RITORNA: Il valore mediano calcolato */
      }
      
      /* üìä ===== FUNZIONE MODE (MODA) ===== */
      const getMode = (array) => {
        const counts = {};
        /* üì¶ OGGETTO CONTATORE: {} crea un oggetto vuoto
           Useremo le propriet√† come contatori per ogni numero
        */
        
        array.forEach(el => counts[el] = counts[el] ? counts[el] + 1 : 1);
        /* üîÑ CONTA LE FREQUENZE: Per ogni elemento nell'array
           
           OPERATORE TERNARIO:
           counts[el] ? counts[el] + 1 : 1
           
           - Se counts[el] esiste gi√†: incrementalo di 1
           - Se non esiste (undefined): inizializzalo a 1
           
           ESEMPIO con [1, 2, 2, 3]:
           - el = 1: counts[1] = undefined ? 1 : 1 ‚Üí counts = {1: 1}
           - el = 2: counts[2] = undefined ? 1 : 1 ‚Üí counts = {1: 1, 2: 1}
           - el = 2: counts[2] = 1 ? 2 : 1 ‚Üí counts = {1: 1, 2: 2}
           - el = 3: counts[3] = undefined ? 1 : 1 ‚Üí counts = {1: 1, 2: 2, 3: 1}
        */
      
        if (new Set(Object.values(counts)).size === 1) {
          return null;
          /* üîç CONTROLLO FREQUENZE UGUALI:
             
             1. Object.values(counts) : Estrae tutti i valori (le frequenze)
             2. new Set(...) : Crea un Set (insieme senza duplicati)
             3. .size === 1 : Se il Set ha solo 1 elemento, tutte le frequenze sono uguali
             
             ESEMPIO: Se counts = {1: 2, 2: 2, 3: 2}
             - Object.values = [2, 2, 2]
             - new Set([2, 2, 2]) = Set{2}
             - size = 1 ‚Üí Nessuna moda! Ritorna null
          */
        }
        
        const highest = Object.keys(counts).sort(
          (a, b) => counts[b] - counts[a]
        )[0];
        /* üèÜ TROVA LA FREQUENZA PI√ô ALTA:
           
           1. Object.keys(counts) : Array delle chiavi (i numeri)
           2. .sort((a, b) => counts[b] - counts[a]) : Ordina per frequenza DECRESCENTE
           3. [0] : Prende il primo elemento (frequenza pi√π alta)
           
           ESEMPIO con counts = {1: 1, 2: 3, 3: 2}:
           - Keys: ["1", "2", "3"]
           - Dopo sort: ["2", "3", "1"] (ordinati per frequenza: 3, 2, 1)
           - highest = "2"
        */
        
        const mode = Object.keys(counts).filter(
          (el) => counts[el] === counts[highest]
        );
        /* üîç FILTRA TUTTI I VALORI CON FREQUENZA MASSIMA:
           
           Potrebbero esserci pi√π mode!
           filter() mantiene solo gli elementi che soddisfano la condizione
           
           ESEMPIO: Se due numeri appaiono entrambi 3 volte, sono entrambi mode
        */
        
        return mode.join(", ");
        /* üì§ RITORNA: I mode uniti da virgole
           join(", ") trasforma l'array in stringa: [1, 3] ‚Üí "1, 3"
        */
      }
      
      /* üìä ===== FUNZIONE RANGE (INTERVALLO) ===== */
      const getRange = (array) => {
        return Math.max(...array) - Math.min(...array);
        /* üéØ SPREAD OPERATOR + MATH: Eleganza pura!
           
           ...array : "Spalma" l'array come argomenti separati
           
           ESEMPIO con [3, 7, 2, 9, 1]:
           - Math.max(...[3, 7, 2, 9, 1]) ‚Üí Math.max(3, 7, 2, 9, 1) = 9
           - Math.min(...[3, 7, 2, 9, 1]) ‚Üí Math.min(3, 7, 2, 9, 1) = 1
           - Range = 9 - 1 = 8
        */
      }
      
      /* üìä ===== FUNZIONE VARIANCE (VARIANZA) ===== */
      const getVariance = (array) => {
        const mean = getMean(array);
        /* üìä CALCOLA LA MEDIA: Serve per i prossimi calcoli */
        
        const variance = array.reduce((acc, el) => {
          const difference = el - mean;
          /* üìê DIFFERENZA: Quanto ogni valore si discosta dalla media */
          
          const squared = difference ** 2;
          /* ‚û°Ô∏è AL QUADRATO: ** √® l'operatore esponenziale
             Eleviamo al quadrato per rendere positive tutte le differenze
          */
          
          return acc + squared;
          /* ‚ûï ACCUMULA: Somma tutti i quadrati delle differenze */
        }, 0) / array.length;
        /* ‚ûó DIVIDI: Per il numero di elementi (media dei quadrati) */
        
        return variance;
        /* üì§ RITORNA: La varianza calcolata
        
           FORMULA MATEMATICA: œÉ¬≤ = Œ£(xi - Œº)¬≤ / n
           dove Œº √® la media e n √® il numero di elementi
        */
      }
      
      /* üìä ===== FUNZIONE STANDARD DEVIATION (DEVIAZIONE STANDARD) ===== */
      const getStandardDeviation = (array) => {
        const variance = getVariance(array);
        /* üìä USA LA VARIANZA: Calcolata dalla funzione precedente */
        
        const standardDeviation = Math.sqrt(variance);
        /* üî¢ RADICE QUADRATA: La deviazione standard √® ‚àövarianza
           Math.sqrt() calcola la radice quadrata
        */
        
        return standardDeviation;
        /* üì§ RITORNA: œÉ = ‚àöœÉ¬≤ */
      }
      
      /* üéÆ ===== FUNZIONE PRINCIPALE CALCULATE ===== */
      const calculate = () => {
        const value = document.querySelector("#numbers").value;
        /* üîç PRENDI IL VALORE: querySelector trova l'elemento con id="numbers"
           .value ottiene il testo inserito dall'utente
        */
        
        const array = value.split(/,\s*/g);
        /*  ‚úÇÔ∏è DIVIDI LA STRINGA: split() taglia la stringa in array */
               
        const numbers = array.map(el => Number(el)).filter(el => !isNaN(el));
        /* üîÑ CONVERTI E FILTRA:
           
           1. map(el => Number(el)) : Converte ogni stringa in numero
              - "1" ‚Üí 1, "abc" ‚Üí NaN
           
           2. filter(el => !isNaN(el)) : Mantiene solo i numeri validi
              - isNaN() = is Not a Number (√® vero per non-numeri)
              - !isNaN() = NOT isNaN (√® vero per numeri veri)
           
           RISULTATO: Solo numeri validi nell'array!
        */
        
        /* üßÆ CALCOLA TUTTE LE STATISTICHE */
        const mean = getMean(numbers);
        const median = getMedian(numbers);
        const mode = getMode(numbers);
        const range = getRange(numbers);
        const variance = getVariance(numbers);
        const standardDeviation = getStandardDeviation(numbers);
      
        /* üìù AGGIORNA IL DOM: Mostra i risultati sulla pagina */
        document.querySelector("#mean").textContent = mean;
        document.querySelector("#median").textContent = median;
        document.querySelector("#mode").textContent = mode;
        document.querySelector("#range").textContent = range;
        document.querySelector("#variance").textContent = variance;
        document.querySelector("#standardDeviation").textContent = standardDeviation;
        /* üéØ querySelector + textContent:
           - querySelector("#id") : Trova l'elemento con quell'ID
           - textContent = valore : Inserisce il testo nell'elemento
           
           √à come riempire i campi vuoti con i risultati calcolati!
        */
      }
    </script>
  </body>
</html>

<!-- üéØ ===== RIASSUNTO DEL CALCOLATORE STATISTICO ===== -->
<!-- 
üìä ARCHITETTURA DELL'APP:
‚îÇ
‚îú‚îÄ‚îÄ üß† HEAD (setup)
‚îÇ   ‚îî‚îÄ‚îÄ üé® CSS minimale ma efficace
‚îÇ       ‚îú‚îÄ‚îÄ üåÉ Tema scuro per gli occhi
‚îÇ       ‚îú‚îÄ‚îÄ üî≤ Bordi bianchi distintivi
‚îÇ       ‚îî‚îÄ‚îÄ üí™ Classe .bold per risultati
‚îÇ
‚îú‚îÄ‚îÄ üìä BODY (interfaccia)
‚îÇ   ‚îú‚îÄ‚îÄ üìã Form interattivo
‚îÇ   ‚îî‚îÄ‚îÄ üìä Sezione risultati con definizioni
‚îÇ
‚îî‚îÄ‚îÄ üßÆ JAVASCRIPT (il cervello)
    ‚îú‚îÄ‚îÄ üìê 6 funzioni matematiche pure
    ‚îú‚îÄ‚îÄ üéÆ 1 funzione controller (calculate)
    ‚îî‚îÄ‚îÄ üîß Manipolazione DOM finale

üîß TECNICHE JAVASCRIPT MODERNE:
‚îú‚îÄ‚îÄ ‚û°Ô∏è Arrow functions ovunque
‚îú‚îÄ‚îÄ üîÑ Array methods: reduce, map, filter, forEach
‚îú‚îÄ‚îÄ üì¶ Object manipulation per conteggi
‚îú‚îÄ‚îÄ üéØ Operatore ternario per logica compatta
‚îú‚îÄ‚îÄ ... Spread operator per Math.max/min
‚îú‚îÄ‚îÄ ** Operatore esponenziale per quadrati
‚îî‚îÄ‚îÄ üÜï toSorted() per copie ordinate

üìö CONCETTI STATISTICI:
‚îú‚îÄ‚îÄ Mean: Media aritmetica
‚îú‚îÄ‚îÄ Median: Valore centrale
‚îú‚îÄ‚îÄ Mode: Valore pi√π frequente
‚îú‚îÄ‚îÄ Range: Max - Min
‚îú‚îÄ‚îÄ Variance: Media dei quadrati delle differenze
‚îî‚îÄ‚îÄ Std Dev: Radice quadrata della varianza

√à come avere un laboratorio di statistica nel browser! üß™üìä‚ú®
-->
